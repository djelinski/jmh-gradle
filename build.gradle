plugins {
    id 'java'
}
repositories {
    mavenCentral()
}
    sourceSets {
        jmh
    }

    dependencies {
        jmhImplementation 'org.openjdk.jmh:jmh-core:1.27'
        jmhAnnotationProcessor 'org.openjdk.jmh:jmh-generator-annprocess:1.27'
    }

    task jmh(type: JavaExec, dependsOn: jmhClasses) {
        main = 'org.openjdk.jmh.Main'
        classpath = sourceSets.jmh.compileClasspath + sourceSets.jmh.runtimeClasspath

        // To enable the built-in stacktrace sampling profiler
        // args = ['-prof', 'async']
    }